local dropdown = Killing:AddDropdown("Select Player", function(text)
    targetName = text
    print(text .. " selected!")
end)

-- Dynamically add player names to the dropdown
for _, player in ipairs(game.Players:GetPlayers()) do
    if player.Name ~= game.Players.LocalPlayer.Name then  
        dropdown:Add(player.Name)  
    end
end

local killTimeLabel -- Declare the label variable

Killing:AddSwitch("Kill Players", function(state)
    killPlayersActive = state
    if killPlayersActive then
        local startTime = tick() -- Get the current time
        coroutine.wrap(function()
            local player = game.Players.LocalPlayer
            local playerName = player.Name
            while killPlayersActive do
                -- Calculate elapsed time
                local elapsedTime = math.floor(tick() - startTime)
                local minutes = math.floor(elapsedTime / 60)
                local seconds = elapsedTime % 60
                killTimeLabel.Text = string.format("Amount of time killing player: %02d:%02d", minutes, seconds)

                equipPunchTool()
                punchAction()
                if targetName ~= "" then
                    for _, otherPlayer in pairs(game.Players:GetChildren()) do
                        if otherPlayer.Name == targetName then
                            local character = game.Workspace:FindFirstChild(otherPlayer.Name)
                            local localCharacter = game.Workspace:FindFirstChild(playerName)
                            if character and localCharacter then
                                local rightHand = localCharacter:FindFirstChild("RightHand")
                                local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
                                if rightHand and humanoidRootPart then
                                    humanoidRootPart.CFrame = rightHand.CFrame
                                    makeInvisible(character)
                                end
                            end
                        end
                    end
                end
                wait(1) -- Update every second
            end
        end)()
    else
        killTimeLabel.Text = "Amount of time killing player: 00:00"
        restoreVisibility()
    end
end)

killTimeLabel = Killing:AddLabel("Amount of time killing player: 00:00") -- Label placed after the toggle
